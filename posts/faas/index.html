<!DOCTYPE html>
<html lang="vn">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Hùng Lê">
    <meta name="description" content="Blog cá nhân của Hùng">
    <meta name="keywords" content="blog,developer,personal">

    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://vuhung071290.github.io/images/faas1.jpg"/>

<meta name="twitter:title" content="Serverless, xu hướng mới của điện toán đám mây"/>
<meta name="twitter:description" content="Serverless, xu hướng mới của điện toán đám mây."/>

    <meta property="og:title" content="Serverless, xu hướng mới của điện toán đám mây" />
<meta property="og:description" content="Serverless, xu hướng mới của điện toán đám mây." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://vuhung071290.github.io/posts/faas/" />

<meta property="og:image" content="https://vuhung071290.github.io/images/faas1.jpg" />

<meta property="og:image" content="https://vuhung071290.github.io/images/faas2.jpg" />

<meta property="og:image" content="https://vuhung071290.github.io/images/faas3.jpg" />

<meta property="og:image" content="https://vuhung071290.github.io/images/faas4.jpg" />

<meta property="og:image" content="https://vuhung071290.github.io/images/faas5.jpg" />

<meta property="og:image" content="https://vuhung071290.github.io/images/faas6.png" />
<meta property="article:published_time" content="2019-06-24T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2019-06-24T00:00:00&#43;00:00"/>



    
      <base href="https://vuhung071290.github.io/posts/faas/">
    
    <title>
  Serverless, xu hướng mới của điện toán đám mây · Blog của Hùng
</title>

    
      <link rel="canonical" href="https://vuhung071290.github.io/posts/faas/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://vuhung071290.github.io/css/coder.min.28d751104f30c16da1aa1bb04015cbe662cacfe0d1b01af4f2240ad58580069c.css" integrity="sha256-KNdREE8wwW2hqhuwQBXL5mLKz&#43;DRsBr08iQK1YWABpw=" crossorigin="anonymous" media="screen" />
    

    

    

    

    
    
    <link rel="icon" type="image/png" href="https://vuhung071290.github.io/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://vuhung071290.github.io/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.55.6" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://vuhung071290.github.io/">
      Blog của Hùng
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://vuhung071290.github.io/posts/">Bài viết</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://vuhung071290.github.io/projects/">Dự án</a>
          </li>
        
      
      
        
        
        
          
        
          
            
              <li class="navigation-item menu-separator">
                <span>|</span>
              </li>
              
            
            <li class="navigation-item">
              <a href="https://vuhung071290.github.io/en/">English</a>
            </li>
          
        
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Serverless, xu hướng mới của điện toán đám mây</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2019-06-24T00:00:00Z'>
                June 24, 2019
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              5 minutes read
            </span>
          </div>
          
          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="https://vuhung071290.github.io/tags/serverless/">serverless</a>
      <span class="separator">•</span>
    <a href="https://vuhung071290.github.io/tags/faas/">faas</a></div>

        </div>
      </header>

      <div>
        

<figure>
    <img src="https://vuhung071290.github.io/images/faas1.jpg"/> 
</figure>


<hr />

<h2 id="serverless-faas-là-gì">Serverless, Faas là gì</h2>

<p>Serverless là môi trường, nền tảng thực thi ứng dụng và dịch vụ mà không phải quan tâm đến máy chủ, việc phân bổ quản lý tài nguyên sẽ do nền tảng này đảm nhiệm. Nói nôm na là coder chỉ cần tập trung vào code.</p>

<figure>
    <img src="https://vuhung071290.github.io/images/faas2.jpg"/> 
</figure>


<p>Serverless có hai dịch vụ chính :</p>

<ul>
<li><p>Backend as a Service (Baas)</p>

<p>Một số ứng dụng chuyển phần lớn logic về front-end, không có server để làm back-end mà chỉ sử dụng các API của bên thứ 3 để thay thế, có rất nhiều đơn vị thứ 3 cung cấp dịch vụ này như Parse, Firebase và AWS Cognito&hellip; Cách này khá tiện lợi vì giảm được việc viết code phần backend nhưng có nhược điểm là phụ thuộc nhiều vào bên thứ 3</p></li>

<li><p>Function as Service (FaaS)</p>

<p>Ở mô hình này, bạn sẽ phải viết code ở phần backend, nhưng thay vì deploy lên server, bạn deploy dưới dạng một function. Funtion này có thể được gọi dưới dạng RestAPI hoặc chạy theo lịch đã sắp sẵn.</p>

<p>Hiện tại, khi nói đến serverless, người ta thường nói đến khái niệm thứ hai – FaaS.</p></li>
</ul>

<h2 id="ưu-nhược-điểm-của-serverless">Ưu nhược điểm của Serverless</h2>

<figure>
    <img src="https://vuhung071290.github.io/images/faas3.jpg"/> 
</figure>


<h3 id="ưu-điểm">Ưu điểm</h3>

<ul>
<li><p>Giá cả phải chăng: Với kiến trúc client-server, bạn phải thuê server theo tháng. Với kiến trúc Serverless, do chi phí được tính theo số lần gọi Function nên rất rẻ.</p></li>

<li><p>Dễ scale mở rộng: Khi số lượng request tăng cao, bạn phải nâng cấp server để đảm bảo tốc độ, việc này khá rườm rà mất thời gian. Với Serverless, bên thứ 3 sẽ tự động tạo thêm nhiều process khi có nhiều request.</p></li>

<li><p>Đơn giản hoá việc code và deploy: Với client-server, bạn phải biết cách build, deploy code lên server, bảo trì và kết nối tới server. Với Serverless, bạn chỉ việc code, mọi việc còn lại sẽ được thực hiện giúp bạn.</p></li>
</ul>

<h3 id="nhược-điểm">Nhược điểm</h3>

<ul>
<li><p>Bảo mật: Để sử dụng tài nguyên hiệu quả, nhà cung cấp dịch vụ có thể cài đặt ứng dụng của nhiều khách hàng khác nhau trên cùng một server vật lý. Điều đó tiềm ẩn nguy cơ về bảo mật, nếu như ứng dụng của bạn làm việc với dữ liệu quan trọng.</p></li>

<li><p>Perfomance: Serverless không hoạt động hiệu quả đối với ứng dụng dạng long-running. Một request trên serverless sẽ tốn nhiều thời gian hơn chạy trên server riêng vì code chỉ chạy mỗi khi có request nên sẽ mất khoảng 20-50ms để start-up.</p></li>

<li><p>Phụ thuộc vào nhà cung cấp dịch vụ: Khó debug, tài nguyên (CPU, RAM) được bên thứ 3 quản lý nên đôi khi ta sẽ khó mà tái tạo môi trường ở local để debug code của FaaS.</p></li>
</ul>

<h2 id="cách-họat-động-của-faas">Cách họat động của Faas</h2>

<p>Như đã đề cập với Faas chúng ta deploy các function, các function này hoạt động theo kiến trúc event driven, mỗi function được định nghĩa các event-souce (một request REST, một file được upload, một record mới được insert trong database&hellip;) khi các event-source được kích hoạt,server sẽ thực thi code của function tương ứng.</p>

<figure>
    <img src="https://vuhung071290.github.io/images/faas4.jpg"/> 
</figure>


<p>Hiện nay ngoài các nhà cung cấp dịch vụ Faas lớn như AWS Lambda, Azure Functions hay Google functions, còn có nhiều các <a href="https://github.com/anaibol/awesome-serverless">framework, tools open source</a> đã và đang được phát triển dành cho Faas, nổi bật là các framework được
phát triển dựa trên nền tảng của k8s như openFaas, openWhisk, Fn, Kubeless&hellip;</p>

<p>Để  hiểu rõ cách một hệ thống serverless hoạt động, hãy xem qua kiến trúc của openFaas</p>

<figure>
    <img src="https://vuhung071290.github.io/images/faas5.jpg"/> 
</figure>


<p>OpenFaas gồm hai thành phần chính:</p>

<figure>
    <img src="https://vuhung071290.github.io/images/faas6.png"/> 
</figure>


<ul>
<li>API Gateway: chịu trách nhiệm đón các request được gọi đến hệ thống, forward các request này đến watchdog, ngoài ra nó còn collect các metrics của functions để thực hiện monitoring.</li>
</ul>

<figure>
    <img src="https://vuhung071290.github.io/images/faas7.jpeg"/> 
</figure>


<ul>
<li>Watchdog: chịu trách nhiệm khởi chạy và quản lý các functions.</li>
</ul>

<p>Các bước để  deploy một function trong OpenFaas:</p>

<ol>
<li><p>Tạo một function rồi đăng kí với OpenFaas qua UI hoặc CLI dưới dạng docker image, image này sẽ được Watchdog quản lý và dùng để khởi tạo function</p></li>

<li><p>Khi một request REST được gọi đến hệ thống, API Gateway forward các request này đến watchdog, dựa trên số lượng request API Gateway cũng gửi kèm các thông số về số lượng để Watchdog scale số pods/container</p></li>

<li><p>Sau khi nhận request, Watchdog làm 3 việc, đầu tiên nó tạo các biến môi trường từ header của request, sau đó khởi chạy function bằng docker swarm với imange function đã được đăng kí trước đó, cuối cùng nó truyền nội dụng của request vào function đã tạo thông qua stdin</p></li>

<li><p>Sau khi function thực hiện xong, Watchdog trả kết quả về thông qua stdout, sau đó trả về cho user thông qua API Gateway</p>

<p><a href="https://medium.com/@lizrice/getting-started-with-openfaas-on-minikube-8d51987f5bbb">Demo Hello world fuction với OpenFaas chạy trên minikube</a></p></li>
</ol>

<h2 id="kết">Kết</h2>

<ul>
<li><p>Serverless không phải là giải pháp thay thế  cho server long-running truyền thống, với ưu nhược điểm của mình serverless phù hợp cho một số <a href="https://www.simform.com/serverless-examples-aws-lambda-use-cases/">usecases</a> nhất định. trong thực tế, các ứng dụng phức tạp có thể sử dụng các server truyền thống kết hợp với functions serverless.</p></li>

<li><p>Vì serverless còn rất mới mẻ nên chưa có một chuẩn chung về cách vận hành và sử dụng giữa các nhà cung cấp, việc thiếu vắng các tool hỗ trợ về debug, monitoring, các framework chưa mature cũng là trở ngại lớn.</p></li>

<li><p>Hiện tại, Serverless là một xu hướng phù hợp cho những công ty đang sử dụng cloud của các ông lớn để tiết kiệm chi phí vận hành và thời gian code, với những công ty sử dụng cơ sở hạ tầng riêng hoặc private cloud có lẽ nên chờ thêm một gian để hệ sinh thái open source của serverless hoàn thiện hơn.</p></li>
</ul>

      </div>

      <footer>
        

<section class="see-also">
  
    
    
    
  
</section>


        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "vuhung071290" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
     © 2019
    
       · 
      Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
